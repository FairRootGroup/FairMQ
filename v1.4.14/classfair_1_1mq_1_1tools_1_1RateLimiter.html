<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FairMQ: fair::mq::tools::RateLimiter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FairMQ
   &#160;<span id="projectnumber">1.4.14</span>
   </div>
   <div id="projectbrief">C++ Message Queuing Library and Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacefair.html">fair</a></li><li class="navelem"><b>mq</b></li><li class="navelem"><b>tools</b></li><li class="navelem"><a class="el" href="classfair_1_1mq_1_1tools_1_1RateLimiter.html">RateLimiter</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classfair_1_1mq_1_1tools_1_1RateLimiter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">fair::mq::tools::RateLimiter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="RateLimit_8h_source.html">RateLimit.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a593f79d4621ad7a54dddec55d4435adb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfair_1_1mq_1_1tools_1_1RateLimiter.html#a593f79d4621ad7a54dddec55d4435adb">RateLimiter</a> (float rate)</td></tr>
<tr class="separator:a593f79d4621ad7a54dddec55d4435adb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a577dffe74db4af027a7e43ff90fea679"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfair_1_1mq_1_1tools_1_1RateLimiter.html#a577dffe74db4af027a7e43ff90fea679">maybe_sleep</a> ()</td></tr>
<tr class="separator:a577dffe74db4af027a7e43ff90fea679"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Objects of type <a class="el" href="classfair_1_1mq_1_1tools_1_1RateLimiter.html">RateLimiter</a> can be used to limit a loop to a given rate of iterations per second.</p>
<p>Example: </p><div class="fragment"><div class="line"><a class="code" href="classfair_1_1mq_1_1tools_1_1RateLimiter.html#a593f79d4621ad7a54dddec55d4435adb">RateLimiter</a> limit(100);  <span class="comment">// 100 Hz</span></div><div class="line"><span class="keywordflow">while</span> (do_more_work()) {</div><div class="line">  work();</div><div class="line">  limit.maybe_sleep();   <span class="comment">// this needs to be at the end of the loop for a</span></div><div class="line">                         <span class="comment">// correct time measurement of the first iterations</span></div><div class="line">}</div></div><!-- fragment --> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a593f79d4621ad7a54dddec55d4435adb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a593f79d4621ad7a54dddec55d4435adb">&#9670;&nbsp;</a></span>RateLimiter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fair::mq::tools::RateLimiter::RateLimiter </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>rate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructs a rate limiter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rate</td><td>Work rate in Hz (calls to maybe_sleep per second). Values less than/equal to 0 set the rate to 1 GHz (which is impossible to achieve, even with a loop that only calls <a class="el" href="classfair_1_1mq_1_1tools_1_1RateLimiter.html#a577dffe74db4af027a7e43ff90fea679">RateLimiter::maybe_sleep</a>). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a577dffe74db4af027a7e43ff90fea679"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a577dffe74db4af027a7e43ff90fea679">&#9670;&nbsp;</a></span>maybe_sleep()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void fair::mq::tools::RateLimiter::maybe_sleep </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Call this function at the end of the iteration rate limited loop.</p>
<p>This function might use <code>std::this_thread::sleep_for</code> to limit the iteration rate. If no sleeps are necessary, the function will back off checking for the time to further allow increased iteration rates (until the requested rate or 1s between rechecks is reached). </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>fairmq/tools/<a class="el" href="RateLimit_8h_source.html">RateLimit.h</a></li>
</ul>
</div><!-- contents -->
<p style="margin: 0 12px 10px 12px;"><a href="https://help.github.com/articles/github-privacy-statement/">privacy</a></p>
